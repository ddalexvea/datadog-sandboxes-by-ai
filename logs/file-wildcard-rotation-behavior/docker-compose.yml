version: '3.8'

services:
  datadog-agent:
    build: .
    container_name: datadog-rotation-demo
    environment:
      - DD_API_KEY=dummy_key_for_testing
      - DD_SITE=datadoghq.com
      - DD_LOGS_ENABLED=true
      - DD_LOG_LEVEL=debug
      - DD_LOGS_CONFIG_CONTAINER_COLLECT_ALL=false
    volumes:
      # Mount logs directory to inspect from host
      - ./logs:/var/log/app
      # Mount agent logs to inspect from host
      - ./agent-logs:/var/log/datadog
    stdin_open: true
    tty: true
